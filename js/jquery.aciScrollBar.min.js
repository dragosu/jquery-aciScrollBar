
/*
 * aciScrollBar jQuery Plugin v2.1
 * http://acoderinsights.ro
 *
 * Copyright (c) 2012 Dragos Ursu
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Require jQuery Library http://jquery.com
 * + (optional) MouseWheel Plugin (for mouse wheel support) https://github.com/brandonaaron/jquery-mousewheel
 * + (optional) TouchSwipe Plugin (for touch based devices) https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 *
 * Date: Fri Feb 24 20:25 2012 +0200
 */

(function(a){a.aciScrollBar={nameSpace:".aciScrollBar",index:0};a.fn.aciScrollBar=function(b,c){if(typeof b=="string"){return a(this)._aciScrollBar(b,c)}return this.each(function(){return a(this)._aciScrollBar(b,c)})};a.fn.aciScrollBar.defaults={delta:40,lineDelay:400,lineTimer:40,pageDelay:400,pageTimer:200,bindMouse:true,bindTouch:false,bindKeyboard:true,resizable:false,position:"bottom-right",verticalBar:"up-bar-down",horizontalBar:"left-bar-right",smoothScroll:false,skin:"desk"};a.fn._aciScrollBar=function(k,c){var f=this;var j=a.extend({},a.fn.aciScrollBar.defaults,k);var b=function(n){var m=a(".aciSb_dummy");if(m.length==0){m=a(document.createElement("div"));m.addClass("aciSb_dummy").css({width:0,height:0,position:"relative",overflow:"hidden"});a(document.body).append(m);var l=a(document.createElement("div"));l.addClass("aciSb_grip "+n);m.append(l)}else{var l=m.find("div");l.attr("class","aciSb_grip "+n)}f.data("_grip_w",l.width());f.data("_grip_h",l.height())};var h=function(){if((typeof k=="undefined")||(typeof k=="object")){e();f.data("options"+a.aciScrollBar.nameSpace,j)}if(typeof k=="string"){if(f.data("customUi"+a.aciScrollBar.nameSpace)){switch(k){case"skinned":return true;case"container":return f.find(".aciSb_cnt:first");case"vertical":return f.find(".aciSb_bar_v:last");case"horizontal":return f.find(".aciSb_bar_h:last");case"resizer":return f.find(".aciSb_resize:last");case"skin":if(typeof c=="string"){var l=f.data("options"+a.aciScrollBar.nameSpace);if(l.skin!=c){b(c);i(l.skin,c);f.trigger("update",true);l.skin=c;f.data("options"+a.aciScrollBar.nameSpace,l)}break}else{var l=f.data("options"+a.aciScrollBar.nameSpace);return l.skin}case"options":return f.data("options"+a.aciScrollBar.nameSpace);case"destroy":d()}}else{switch(k){case"skinned":return false;case"vertical":return a([]);case"horizontal":return a([]);case"resizer":return a([]);case"skin":if(typeof c=="string"){break}else{var l=f.data("options"+a.aciScrollBar.nameSpace);return l?l.skin:null}case"options":var l=f.data("options"+a.aciScrollBar.nameSpace);return l?l:j}}}return f};var g=function(n,l,m){n.each(function(){a(this).attr("class",a(this).attr("class").replace(l,m))})};var i=function(l,m){g(f,l,m);g(f.find(".aciSb_bar_v:last, .aciSb_bar_v:last *"),l,m);g(f.find(".aciSb_bar_h:last, .aciSb_bar_h:last *"),l,m);g(f.find(".aciSb_resize:last"),l,m);g(f.find(".aciSb_cnt:first"),l,m)};var d=function(){if(f.data("customUi"+a.aciScrollBar.nameSpace)){var n=f.find(".aciSb_cnt:first");var l=n.get(0).scrollHeight;var o=n.get(0).scrollWidth;var q=n.scrollTop();var p=n.scrollLeft();f.data("customUi"+a.aciScrollBar.nameSpace,false);var m=f.data("index"+a.aciScrollBar.nameSpace);a("html").unbind(a.aciScrollBar.nameSpace+"-"+m);f.unbind(a.aciScrollBar.nameSpace);f.find(".aciSb_bar_v:last").remove();f.find(".aciSb_bar_h:last").remove();f.find(".aciSb_resize:last").remove();n.children().unwrap();f.removeClass("aciScrollBar "+j.skin).css("overflow",f.data("overflow"+a.aciScrollBar.nameSpace));f.get(0).scrollTop=Math.round(f.get(0).scrollHeight*q/l);f.get(0).scrollLeft=Math.round(f.get(0).scrollWidth*p/o)}};var e=function(){if(f.data("customUi"+a.aciScrollBar.nameSpace)){return}if((f.css("overflow")!="auto")&&(f.css("overflow")!="scroll")){return}f.data("customUi"+a.aciScrollBar.nameSpace,true);var ar=f.data("index"+a.aciScrollBar.nameSpace);if(!ar){a.aciScrollBar.index++;f.data("index"+a.aciScrollBar.nameSpace,a.aciScrollBar.index);ar=a.aciScrollBar.index}f.trigger("init");f.data("overflow"+a.aciScrollBar.nameSpace,f.css("overflow"));var au=(f.css("overflow")=="auto")&&!j.resizable;var aw={height:f.get(0).scrollHeight,width:f.get(0).scrollWidth,top:f.scrollTop(),left:f.scrollLeft()};f.get(0).scrollLeft=0;f.get(0).scrollTop=0;b(j.skin);f.css("overflow","hidden").addClass("aciScrollBar "+j.skin);f.wrapInner('<div class="aciSb_cnt '+j.skin+'" unselectable="on"></div>');var aB=f.find(".aciSb_cnt:first");aB.get(0).scrollLeft=0;aB.get(0).scrollTop=0;var ac=function(aH,aJ,aI){var aK=a(document.createElement(aH));aK.addClass(aJ+" "+j.skin).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none"});aI.append(aK);return aK};var A=ac("div","aciSb_bar_v",f);var ad=ac("div","aciSb_arrow_t",A);var J=ac("div","aciSb_space_t",A);var H=ac("div","aciSb_track_v",A);var I=ac("div","aciSb_track_t",H);var p=ac("div","aciSb_drag_vc",H);var Z=ac("div","aciSb_drag_t",p);var W=ac("div","aciSb_drag_v",p);var n=ac("div","aciSb_drag_vg",W);var ai=ac("div","aciSb_drag_b",p);var X=ac("div","aciSb_track_b",H);var Y=ac("div","aciSb_space_b",A);var al=ac("div","aciSb_arrow_b",A);var F=ac("div","aciSb_bar_h",f);var ah=ac("div","aciSb_arrow_l",F);var R=ac("div","aciSb_space_l",F);var T=ac("div","aciSb_track_h",F);var P=ac("div","aciSb_track_l",T);var K=ac("div","aciSb_drag_hc",T);var ae=ac("div","aciSb_drag_l",K);var ag=ac("div","aciSb_drag_h",K);var G=ac("div","aciSb_drag_hg",ag);var aa=ac("div","aciSb_drag_r",K);var L=ac("div","aciSb_track_r",T);var M=ac("div","aciSb_space_r",F);var af=ac("div","aciSb_arrow_r",F);var v=ac("div","aciSb_resize",f);A.css("position","absolute").find("*").css({position:"absolute",width:A.width()+"px"});F.css("position","absolute").find("*").css({position:"absolute",height:F.height()+"px"});v.css({position:"absolute",width:A.width()+"px",height:F.height()+"px"});A.width=function(){if(A.is(":hidden")){return 0}else{return a(A).width()}};F.height=function(){if(F.is(":hidden")){return 0}else{return a(F).height()}};var av=function(){return aB.get(0).scrollWidth};var ao=function(){return aB.get(0).scrollHeight};var aF=function(){if(!j.resizable&&(j.horizontalBar=="none")){F.hide()}else{if(av()<=f.width()-A.width()){if(!j.resizable&&au){F.hide()}else{F.show()}}else{F.show()}}if(!j.resizable&&(j.verticalBar=="none")){A.hide()}else{if(ao()<=f.height()-F.height()){if(!j.resizable&&au){A.hide()}else{A.show()}}else{A.show()}}};var aE=1;var t=1;switch(j.position.replace(/[^a-z]/g,"")){case"topleft":case"lefttop":aE=-1;t=-1;break;case"topright":case"righttop":aE=1;t=-1;break;case"bottomleft":case"leftbottom":aE=-1;t=1;break}var N=function(){aB.css("width",f.width()+"px").css("height",f.height()+"px");aF();aB.css("width",f.width()-A.width()+"px").css("height",f.height()-F.height()+"px");aF();aB.css("width",f.width()-A.width()+"px").css("height",f.height()-F.height()+"px");A.find("*").css("width",A.width()+"px");F.find("*").css("height",F.height()+"px");v.css({width:A.width()+"px",height:F.height()+"px"});var aH=f.width()-A.width();var aJ=f.height()-F.height();var aK=parseInt(f.css("padding-left"));var aI=parseInt(f.css("padding-top"));A.css("height",aJ+"px").css("left",((aE==1)?aH:0)+aK+"px").css("top",((t==1)?0:F.height())+aI+"px");F.css("width",aH+"px").css("top",((t==1)?aJ:0)+aI+"px").css("left",((aE==1)?0:A.width())+aK+"px");switch(j.verticalBar.replace(/[^a-z]/g,"")){case"bar":ad.hide();J.css("top","0px");H.css("height",aJ-J.height()-Y.height()+"px").css("top",J.height()+"px");Y.css("top",A.height()-Y.height()+"px");al.hide();break;case"updownbar":ad.css("top","0px");al.css("top",ad.height()+"px");J.css("top",ad.height()+al.height()+"px");H.css("height",aJ-ad.height()-J.height()-Y.height()-al.height()+"px").css("top",ad.height()+al.height()+J.height()+"px");Y.css("top",A.height()-Y.height()+"px");break;case"barupdown":J.css("top","0px");H.css("height",aJ-ad.height()-J.height()-Y.height()-al.height()+"px").css("top",J.height()+"px");Y.css("top",A.height()-ad.height()-al.height()-Y.height()+"px");ad.css("top",A.height()-ad.height()-al.height()+"px");al.css("top",A.height()-al.height()+"px");break;default:ad.css("top","0px");J.css("top",ad.height()+"px");H.css("height",aJ-ad.height()-J.height()-Y.height()-al.height()+"px").css("top",ad.height()+J.height()+"px");Y.css("top",A.height()-al.height()-Y.height()+"px");al.css("top",A.height()-al.height()+"px")}switch(j.horizontalBar.replace(/[^a-z]/g,"")){case"bar":ah.hide();R.css("left","0px");T.css("width",aH-R.width()-M.width()+"px").css("left",R.width()+"px");M.css("left",F.width()-M.width()+"px");af.hide();break;case"leftrightbar":ah.css("left","0px");af.css("left",ah.width()+"px");R.css("left",ah.width()+af.width()+"px");T.css("width",aH-ah.width()-R.width()-M.width()-af.width()+"px").css("left",ah.width()+af.width()+R.width()+"px");M.css("left",F.width()-M.width()+"px");break;case"barleftright":R.css("left","0px");T.css("width",aH-ah.width()-R.width()-M.width()-af.width()+"px").css("left",R.width()+"px");M.css("left",F.width()-ah.width()-af.width()-M.width()+"px");ah.css("left",F.width()-ah.width()-af.width()+"px");af.css("left",F.width()-af.width()+"px");break;default:ah.css("left","0px");R.css("left",ah.width()+"px");T.css("width",aH-ah.width()-R.width()-M.width()-af.width()+"px").css("left",ah.width()+R.width()+"px");M.css("left",F.width()-af.width()-M.width()+"px");af.css("left",F.width()-af.width()+"px")}v.css("left",((aE==1)?aH:0)+aK+"px").css("top",((t==1)?aJ:0)+aI+"px");if(A.is(":visible")&&F.is(":visible")){if(j.resizable){v.addClass("aciSb_on"+((t==1)?"b":"t")+((aE==1)?"r":"l"))}else{v.addClass("aciSb_gray")}v.show()}else{v.hide()}aB.css("margin-left",((aE==1)?0:A.width())+"px").css("margin-top",((t==1)?0:F.height())+"px");f.data("width"+a.aciScrollBar.nameSpace,f.width());f.data("height"+a.aciScrollBar.nameSpace,f.height());f.data("scrollWidth"+a.aciScrollBar.nameSpace,av());f.data("scrollHeight"+a.aciScrollBar.nameSpace,ao());f.data("paddingLeft"+a.aciScrollBar.nameSpace,f.css("padding-left"));f.data("paddingTop"+a.aciScrollBar.nameSpace,f.css("padding-top"))};N();var y=function(){var aH=f.data("_grip_h");if(aH){return(H.height()-aH)/(ao()-aB.height())}return Math.min(H.height()/ao(),1)};var aC=function(){var aH=f.data("_grip_w");if(aH){return(T.width()-aH)/(av()-aB.width())}return Math.min(T.width()/av(),1)};var aj=function(){if(aB.get(0).scrollHeight<=f.height()-F.height()){A.addClass("aciSb_gray");I.hide();p.hide();X.hide();return}A.removeClass("aciSb_gray");var aJ=y();var aL=a(aB).scrollTop()*aJ;var aK=f.data("_grip_h");var aI=Z.height()+aK+ai.height();var aH=aK?aI:Math.max(Math.min(Math.round(A.height()*aJ),H.height()),aI);if(aL+aH>H.height()){aL=H.height()-aH}if(aL>0){I.css("height",aL+"px").show()}else{I.hide()}if(aH>0){p.css("height",aH+"px").css("top",aL+"px").show();if(aH>Z.height()+ai.height()){W.css("height",aH-aI+"px").css("top",Z.height()+"px").show();if((n.height()<=aH-aI)||aK){n.css("top",Math.round(aH/2-n.height()/2)-Z.height()+"px").show()}else{n.hide()}}else{W.hide()}ai.css("top",aH-ai.height()+"px")}else{p.hide()}if(aL+aH<H.height()){X.css("height",H.height()-(aL+aH)).css("top",aL+aH+"px").show()}else{X.hide()}};var ay=function(){if(aB.get(0).scrollWidth<=f.width()-A.width()){F.addClass("aciSb_gray");P.hide();K.hide();L.hide();return}F.removeClass("aciSb_gray");var aK=aC();var aL=a(aB).scrollLeft()*aK;var aJ=f.data("_grip_w");var aI=ae.width()+aJ+aa.width();var aH=aJ?aI:Math.max(Math.min(Math.round(F.width()*aK),T.width()),aI);if(aL+aH>T.width()){aL=T.width()-aH}if(aL>0){P.css("width",aL+"px").show()}else{P.hide()}if(aH>0){K.css("width",aL+"px").css("left",aL+"px").show();if(aH>ae.width()+aa.width()){ag.css("width",aH-aI+"px").css("left",ae.width()+"px").show();if((G.width()<=aH-aI)||aJ){G.css("left",Math.round(aH/2-G.width()/2)-ae.width()+"px").show()}else{G.hide()}}else{ag.hide()}aa.css("left",aH-aa.width()+"px")}else{K.hide()}if(aL+aH<T.width()){L.css("width",T.width()-(aL+aH)).css("left",aL+aH+"px").show()}else{L.hide()}};aj();ay();var ax=function(aJ){if(ao()>f.height()-F.height()){var aI,aH;if(typeof aJ=="object"){aI=Math.max(a(aB).scrollTop()+-aJ.delta*j.delta,0);aH=aJ.timed}else{aI=aJ;aH=j.lineTimer}if(j.smoothScroll&&!B){a(aB).stop(false,true).animate({scrollTop:aI},{duration:aH,easing:"linear",complete:function(){f.trigger("scroll");aj()},step:function(){aj()},queue:true})}else{aB.get(0).scrollTop=aI}}else{aB.get(0).scrollTop=0}f.trigger("scroll");aj()};var az=function(aJ){if(av()>f.width()-A.width()){var aI,aH;if(typeof aJ=="object"){aI=Math.max(a(aB).scrollLeft()+-aJ.delta*j.delta,0);aH=aJ.timed}else{aI=aJ;aH=j.lineTimer}if(j.smoothScroll&&!B){a(aB).stop(false,true).animate({scrollLeft:aI},{duration:aH,easing:"linear",complete:function(){f.trigger("scroll");ay()},step:function(){ay()},queue:true})}else{aB.get(0).scrollLeft=aI}}else{aB.get(0).scrollLeft=0}f.trigger("scroll");ay()};if(j.bindMouse){f.bind("mousewheel"+a.aciScrollBar.nameSpace,function(aH,aI){if(typeof aI=="object"){ax(aI)}else{ax({delta:aI*2,timed:j.lineTimer})}return false})}var Q=function(aK,aH,aJ,aL){if(!aK.touches){return}switch(aH){case"start":B=true;V();break;case"move":var aI=new Date().getTime();if(!r||(r<aI-250)){r=aI;B=true;switch(aJ){case"up":ax(a(aB).scrollTop()+aL);break;case"down":ax(a(aB).scrollTop()-aL);break;case"left":az(a(aB).scrollLeft()+aL);break;case"right":az(a(aB).scrollLeft()-aL);break}}break;case"end":case"cancel":B=false;r=false;break}};if(j.bindTouch&&(typeof a.fn.swipe!="undefined")){f.swipe({swipeStatus:Q,threshold:5,fingers:1,allowPageScroll:"none"})}A.bind("mousewheel"+a.aciScrollBar.nameSpace,function(aH,aI){if(typeof aI=="object"){ax(aI)}else{ax({delta:aI*2,timed:j.lineTimer})}return false}).bind("selectstart"+a.aciScrollBar.nameSpace,function(){return false}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){f.focus();return false}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E();C()}).bind("click"+a.aciScrollBar.nameSpace,function(){return false});F.bind("mousewheel"+a.aciScrollBar.nameSpace,function(aH,aI){if(typeof aI=="object"){az(aI)}else{az({delta:aI*2,timed:j.lineTimer})}return false}).bind("selectstart"+a.aciScrollBar.nameSpace,function(){return false}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){f.focus();return false}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E();C()}).bind("click"+a.aciScrollBar.nameSpace,function(){return false});var o={curr:{x:null,y:null},start:{x:null,y:null},ref:{x:null,y:null}};var z=function(){o.start.x=o.curr.x;o.start.y=o.curr.y;o.ref.x=f.width();o.ref.y=f.height()};var aD=function(){if(v.get(0)==u){var aI=Math.max(o.ref.x+o.curr.x-o.start.x,v.width()*4);var aH=Math.max(o.ref.y+o.curr.y-o.start.y,v.height()*4);f.trigger("resize",{width:aI,height:aH})}};v.bind("selectstart"+a.aciScrollBar.nameSpace,function(){return false}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){f.focus();u=this;V();z();return false}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E();return false}).bind("click"+a.aciScrollBar.nameSpace,function(){E();return false});var u=null;var E=function(){a(u).removeClass("aciSb_sel");u=null;V()};var x=null;var V=function(){if(x){window.clearInterval(x);x=null}};var O=function(aI,aJ,aH){V();x=window.setInterval(function(){aI.trigger("mousewheel",{delta:aJ,timed:aH})},aH)};var aG=function(aJ,aK,aH,aI){V();x=window.setInterval(function(){O(aJ,aK,aH)},aI)};var S=function(aJ,aI){if(aI){a(aJ).addClass("aciSb_over");if(u==aJ){a(aJ).addClass("aciSb_sel")}var aH=a(aJ).parent();if(aH.hasClass("aciSb_bar_v")||aH.hasClass("aciSb_bar_h")){aH.addClass("aciSb_eover")}else{aH=aH.parent();aH.addClass("aciSb_eover")}}else{a(aJ).removeClass("aciSb_over").removeClass("aciSb_sel");var aH=a(aJ).parent();if(aH.hasClass("aciSb_bar_v")||aH.hasClass("aciSb_bar_h")){aH.removeClass("aciSb_eover")}else{aH=aH.parent();aH.removeClass("aciSb_eover")}}};var am=function(aH,aI){aH.bind("mouseover"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mousemove"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mouseout"+a.aciScrollBar.nameSpace,function(){V();S(this,false)}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){u=this;a(this).trigger("mousewheel",{delta:aI,timer:j.lineTimer});aG(a(this),aI,j.lineTimer,j.lineDelay);a(this).addClass("aciSb_sel")}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E()}).bind("click"+a.aciScrollBar.nameSpace,function(){E();return false})};am(ad,1);am(al,-1);am(ah,1);am(af,-1);var ak=function(aH,aI){aH.bind("mouseover"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mousemove"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mouseout"+a.aciScrollBar.nameSpace,function(){V();S(this,false)}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){u=this;a(this).trigger("mousewheel",{delta:aI*(f.height()/(j.delta*2)),timer:j.lineTimer});aG(a(this).parent().parent(),aI*(f.height()/j.delta),j.pageTimer,j.pageDelay);a(this).addClass("aciSb_sel")}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E()}).bind("click"+a.aciScrollBar.nameSpace,function(){E();return false})};ak(I,1);ak(X,-1);ak(P,1);ak(L,-1);var at=function(aH){aH.bind("mouseover"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mousemove"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mouseout"+a.aciScrollBar.nameSpace,function(){V();S(this,false)}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E()}).bind("click"+a.aciScrollBar.nameSpace,function(){E();return false})};at(J);at(Y);at(R);at(M);var an=function(){o.start.x=o.curr.x;o.start.y=o.curr.y;o.ref.x=a(aB).scrollLeft();o.ref.y=a(aB).scrollTop()};var q=function(){if(p.get(0)==u){A.addClass("aciSb_eover");p.addClass("aciSb_sel");var aI=o.ref.y;var aL=o.curr.y-o.start.y;var aH=y();var aK=(Math.abs(o.ref.y*aH)+aL)/aH;ax(aK)}if(K.get(0)==u){F.addClass("aciSb_eover");K.addClass("aciSb_sel");var aI=o.ref.x;var aL=o.curr.x-o.start.x;var aH=aC();var aJ=(Math.abs(o.ref.x*aH)+aL)/aH;az(aJ)}};var C=function(){A.removeClass("aciSb_eover");p.removeClass("aciSb_sel");F.removeClass("aciSb_eover");K.removeClass("aciSb_sel")};var m=function(aH){aH.bind("mouseover"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mousemove"+a.aciScrollBar.nameSpace,function(){S(this,true)}).bind("mouseout"+a.aciScrollBar.nameSpace,function(){V();S(this,false)}).bind("mousedown"+a.aciScrollBar.nameSpace,function(){u=this;V();an();a(this).addClass("aciSb_sel")}).bind("mouseup"+a.aciScrollBar.nameSpace,function(){E()}).bind("click"+a.aciScrollBar.nameSpace,function(){E();return false})};m(p);m(K);var B=false;var r=false;var w=function(aJ,aH){if(!aJ.touches){return}switch(aH){case"start":B=true;V();o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;an();break;case"move":var aI=new Date().getTime();if(!r||(r<aI-250)){r=aI;B=true;u=p.get(0);o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;q()}break;case"end":case"cancel":E();C();B=false;r=false;break}};var l=function(aJ,aH){if(!aJ.touches){return}switch(aH){case"start":B=true;V();o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;an();break;case"move":var aI=new Date().getTime();if(!r||(r<aI-250)){r=aI;B=true;u=K.get(0);o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;q()}break;case"end":case"cancel":E();C();B=false;r=false;break}};var ab=function(aJ,aH){if(!aJ.touches){return}switch(aH){case"start":B=true;V();o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;z();break;case"move":var aI=new Date().getTime();if(!r||(r<aI-250)){r=aI;B=true;u=v.get(0);o.curr.x=aJ.touches[0].pageX;o.curr.y=aJ.touches[0].pageY;aD()}break;case"end":case"cancel":E();B=false;r=false;break}};if(typeof a.fn.swipe!="undefined"){H.swipe({swipeStatus:w,threshold:5,fingers:1,allowPageScroll:"none"});T.swipe({swipeStatus:l,threshold:5,fingers:1,allowPageScroll:"none"});v.swipe({swipeStatus:ab,threshold:5,fingers:1,allowPageScroll:"none"})}var aA=false;if(j.bindKeyboard){f.bind("keydown"+a.aciScrollBar.nameSpace,function(aH){if(!aA){return}switch(aH.which){case 38:ad.trigger("mousedown").trigger("mouseup");return false;case 40:al.trigger("mousedown").trigger("mouseup");return false;case 37:ah.trigger("mousedown").trigger("mouseup");return false;case 39:af.trigger("mousedown").trigger("mouseup");return false;case 33:I.trigger("mousedown").trigger("mouseup");return false;case 34:X.trigger("mousedown").trigger("mouseup");return false;case 36:ax(0);az(0);return false;case 35:ax(ao());az(0);return false}})}a("html").bind("mouseup"+a.aciScrollBar.nameSpace+"-"+ar,function(){E();C()}).bind("mousemove"+a.aciScrollBar.nameSpace+"-"+ar,function(aH){o.curr.x=aH.pageX;o.curr.y=aH.pageY;if(u){q();aD()}}).bind("mouseout"+a.aciScrollBar.nameSpace+"-"+ar,function(aH){if(!aH.relatedTarget){E();C()}});var s=function(aJ){var aK=aJ.position();var aI=a(aB).scrollTop()+aK.top;var aH=a(aB).scrollLeft()+aK.left;return{top:aI,left:aH}};var ap=function(aI,aK){if(typeof aI=="string"){var aH=null;var aJ=new RegExp("^([0-9]+)%$");if(aH=aJ.exec(aI)){aI=Math.round(aK*parseFloat(aH[1])/100)}else{aJ=new RegExp("^([0-9]+)$");if(aH=aJ.exec(aI)){aI=Math.abs(parseInt(aH[1]))}}}return aI};var U=null;var D=false;f.bind("focus"+a.aciScrollBar.nameSpace,function(){aA=true}).bind("blur"+a.aciScrollBar.nameSpace,function(){aA=false}).bind("lineup"+a.aciScrollBar.nameSpace,function(){ad.trigger("mousedown").trigger("mouseup");return false}).bind("pageup"+a.aciScrollBar.nameSpace,function(){I.trigger("mousedown").trigger("mouseup");return false}).bind("linedown"+a.aciScrollBar.nameSpace,function(){al.trigger("mousedown").trigger("mouseup");return false}).bind("pagedown"+a.aciScrollBar.nameSpace,function(){X.trigger("mousedown").trigger("mouseup");return false}).bind("lineleft"+a.aciScrollBar.nameSpace,function(){ah.trigger("mousedown").trigger("mouseup");return false}).bind("pageleft"+a.aciScrollBar.nameSpace,function(){P.trigger("mousedown").trigger("mouseup");return false}).bind("lineright"+a.aciScrollBar.nameSpace,function(){af.trigger("mousedown").trigger("mouseup");return false}).bind("pageright"+a.aciScrollBar.nameSpace,function(){L.trigger("mousedown").trigger("mouseup");return false}).bind("scroll"+a.aciScrollBar.nameSpace,function(aN,aM){if(typeof aM!="object"){return false}if(typeof aM.element!="undefined"){var aL=a(aM.element);if(aL.get(0)&&f.has(aL.get(0))){var aO=s(aL);var aH=((typeof aM.center!="boolean")?true:aM.center);if(aH){if(aL.width()<f.width()-A.width()){aO.left-=Math.round(f.width()/2-aL.width()/2)}if(aL.height()<f.height()-F.height()){aO.top-=Math.round(f.height()/2-aL.height()/2)}}var aI=(aM.offsety?parseInt(aM.offsety):0);if(Math.abs(a(aB).scrollTop()-Math.abs(aO.top))>=aI){if(aM.animate){a(aB).animate({scrollTop:aO.top},{duration:ap(aM.duration),easing:aM.animate,complete:function(){f.trigger("scroll");aj()},step:function(){aj()}})}else{ax(aO.top)}}var aJ=(aM.offsetx?parseInt(aM.offsetx):0);if(Math.abs(a(aB).scrollLeft()-Math.abs(aO.left))>=aJ){if(aM.animate){a(aB).animate({scrollLeft:aO.left},{duration:ap(aM.duration),easing:aM.animate,complete:function(){f.trigger("scroll");ay()},step:function(){ay()}})}else{az(aO.left)}}}return false}if(typeof aM.top!="undefined"){var aP=ap(aM.top,ao()-f.height()+F.height());if(aM.animate){a(aB).animate({scrollTop:aP},{duration:ap(aM.duration),easing:aM.animate,complete:function(){f.trigger("scroll");aj()},step:function(){aj()}})}else{ax(aP)}}if(typeof aM.left!="undefined"){var aK=ap(aM.left,av()-f.width()+A.width());if(aM.animate){a(aB).animate({scrollLeft:aK},{duration:ap(aM.duration),easing:aM.animate,complete:function(){f.trigger("scroll");ay()},step:function(){ay()}})}else{az(aK)}}return false}).bind("update"+a.aciScrollBar.nameSpace,function(aM,aJ){if(D){return false}if(B){aq(500);return false}D=true;var aN=(f.data("width"+a.aciScrollBar.nameSpace)!=f.width())||(f.data("height"+a.aciScrollBar.nameSpace)!=f.height());var aI=f.data("scrollWidth"+a.aciScrollBar.nameSpace);var aH=f.data("scrollHeight"+a.aciScrollBar.nameSpace);if(aN||(aI!=av())||(aH!=ao())||(f.data("paddingLeft"+a.aciScrollBar.nameSpace)!=f.css("padding-left"))||(f.data("paddingTop"+a.aciScrollBar.nameSpace)!=f.css("padding-top"))||aJ){var aL=a(aB).scrollTop();var aK=a(aB).scrollLeft();N();if(aN&&((ao()!=aH)||(av()!=aI))){aB.get(0).scrollTop=Math.round(ao()*aL/aH);aB.get(0).scrollLeft=Math.round(av()*aK/aI);f.trigger("scroll")}aq(10)}else{aq(200)}aj();ay();D=false;return false});var aq=function(aH){if(U){window.clearTimeout(U)}U=window.setTimeout(function(){if(f.data("customUi"+a.aciScrollBar.nameSpace)){if(D){return}f.trigger("update");return}},aH)};aq(200);f.trigger("scroll",{top:Math.round(ao()*aw.top/aw.height),left:Math.round(av()*aw.left/aw.width),animate:true,duration:0});f.trigger("ready")};return h()};a(window).bind("unload"+a.aciScrollBar.nameSpace,function(){a("*").unbind(a.aciScrollBar.nameSpace);for(var b=1;b<=a.aciScrollBar.index;b++){a("*").unbind(a.aciScrollBar.nameSpace+"-"+b)}})})(jQuery);